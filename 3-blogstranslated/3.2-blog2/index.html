<!doctype html><html lang=en class="js csstransforms3d"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.134.3"><meta name=description content><meta name=author content="thienlh@thienlu.com"><link rel=icon href=../../images/favicon.png type=image/png><title>Blog 2 :: Internship Report</title>
<link href=../../css/nucleus.css?1765287969 rel=stylesheet><link href=../../css/fontawesome-all.min.css?1765287969 rel=stylesheet><link href=../../css/hybrid.css?1765287969 rel=stylesheet><link href=../../css/featherlight.min.css?1765287969 rel=stylesheet><link href=../../css/perfect-scrollbar.min.css?1765287969 rel=stylesheet><link href=../../css/auto-complete.css?1765287969 rel=stylesheet><link href=../../css/atom-one-dark-reasonable.css?1765287969 rel=stylesheet><link href=../../css/theme.css?1765287969 rel=stylesheet><link href=../../css/hugo-theme.css?1765287969 rel=stylesheet><link href=../../css/theme-workshop.css?1765287969 rel=stylesheet><script src=../../js/jquery-3.3.1.min.js?1765287969></script><style>:root #header+#content>#left>#rlblock_left{display:none!important}</style></head><body data-url=../../3-blogstranslated/3.2-blog2/><nav id=sidebar class=showVisitedLinks><div id=header-wrapper><div id=header><a id=logo href=../../><svg id="Layer_1" data-name="Layer 1" viewBox="0 0 60 30" width="30%"><defs><style>.cls-1{fill:#fff}.cls-2{fill:#f90;fill-rule:evenodd}</style></defs><title>AWS-Logo_White-Color</title><path class="cls-1" d="M14.09 10.85a4.7 4.7.0 00.19 1.48 7.73 7.73.0 00.54 1.19.77.77.0 01.12.38.64.64.0 01-.32.49l-1 .7a.83.83.0 01-.44.15.69.69.0 01-.49-.23 3.8 3.8.0 01-.6-.77q-.25-.42-.51-1a6.14 6.14.0 01-4.89 2.3 4.54 4.54.0 01-3.32-1.19 4.27 4.27.0 01-1.22-3.2 4.28 4.28.0 011.46-3.4A6.06 6.06.0 017.69 6.46a12.47 12.47.0 011.76.13q.92.13 1.91.36V5.73a3.65 3.65.0 00-.79-2.66A3.81 3.81.0 007.86 2.3a7.71 7.71.0 00-1.79.22 12.78 12.78.0 00-1.79.57 4.55 4.55.0 01-.58.22h-.26q-.35.0-.35-.52V2a1.09 1.09.0 01.12-.58 1.2 1.2.0 01.47-.35A10.88 10.88.0 015.77.32 10.19 10.19.0 018.36.0a6 6 0 014.35 1.35 5.49 5.49.0 011.38 4.09zM7.34 13.38a5.36 5.36.0 001.72-.31A3.63 3.63.0 0010.63 12 2.62 2.62.0 0011.19 11a5.63 5.63.0 00.16-1.44v-.7a14.35 14.35.0 00-1.53-.28 12.37 12.37.0 00-1.56-.1 3.84 3.84.0 00-2.47.67A2.34 2.34.0 005 11a2.35 2.35.0 00.61 1.76A2.4 2.4.0 007.34 13.38zm13.35 1.8a1 1 0 01-.64-.16 1.3 1.3.0 01-.35-.65L15.81 1.51a3 3 0 01-.15-.67.36.36.0 01.41-.41H17.7a1 1 0 01.65.16 1.4 1.4.0 01.33.65l2.79 11 2.59-11A1.17 1.17.0 0124.39.6a1.1 1.1.0 01.67-.16H26.4a1.1 1.1.0 01.67.16 1.17 1.17.0 01.32.65L30 12.39 32.88 1.25A1.39 1.39.0 0133.22.6a1 1 0 01.65-.16h1.54a.36.36.0 01.41.41 1.36 1.36.0 010 .26 3.64 3.64.0 01-.12.41l-4 12.86a1.3 1.3.0 01-.35.65 1 1 0 01-.64.16H29.25a1 1 0 01-.67-.17 1.26 1.26.0 01-.32-.67L25.67 3.64l-2.56 10.7a1.26 1.26.0 01-.32.67 1 1 0 01-.67.17zm21.36.44a11.28 11.28.0 01-2.56-.29 7.44 7.44.0 01-1.92-.67 1 1 0 01-.61-.93v-.84q0-.52.38-.52a.9.9.0 01.31.06l.42.17a8.77 8.77.0 001.83.58 9.78 9.78.0 002 .2 4.48 4.48.0 002.43-.55 1.76 1.76.0 00.86-1.57 1.61 1.61.0 00-.45-1.16A4.29 4.29.0 0043 9.22l-2.41-.76A5.15 5.15.0 0138 6.78a3.94 3.94.0 01-.83-2.41 3.7 3.7.0 01.45-1.85 4.47 4.47.0 011.19-1.37 5.27 5.27.0 011.7-.86A7.4 7.4.0 0142.6.0a8.87 8.87.0 011.12.07q.57.07 1.08.19t.95.26a4.27 4.27.0 01.7.29 1.59 1.59.0 01.49.41.94.94.0 01.15.55v.79q0 .52-.38.52a1.76 1.76.0 01-.64-.2 7.74 7.74.0 00-3.2-.64 4.37 4.37.0 00-2.21.47 1.6 1.6.0 00-.79 1.48 1.58 1.58.0 00.49 1.18 4.94 4.94.0 001.83.92L44.55 7a5.08 5.08.0 012.57 1.6A3.76 3.76.0 0147.9 11a4.21 4.21.0 01-.44 1.93 4.4 4.4.0 01-1.21 1.47 5.43 5.43.0 01-1.85.93A8.25 8.25.0 0142.05 15.62z"/><path class="cls-2" d="M45.19 23.81C39.72 27.85 31.78 30 25 30A36.64 36.64.0 01.22 20.57c-.51-.46-.06-1.09.56-.74A49.78 49.78.0 0025.53 26.4 49.23 49.23.0 0044.4 22.53C45.32 22.14 46.1 23.14 45.19 23.81z"/><path class="cls-2" d="M47.47 21.21c-.7-.9-4.63-.42-6.39-.21-.53.06-.62-.4-.14-.74 3.13-2.2 8.27-1.57 8.86-.83s-.16 5.89-3.09 8.35c-.45.38-.88.18-.68-.32C46.69 25.8 48.17 22.11 47.47 21.21z"/></svg></a></div><div class=searchbox><label for=search-by><i class="fas fa-search"></i></label>
<input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span></div><script type=text/javascript src=../../js/lunr.min.js?1765287969></script><script type=text/javascript src=../../js/auto-complete.js?1765287969></script><script type=text/javascript>var baseurl="https://duc140205.github.io/aws-internship-report/"</script><script type=text/javascript src=../../js/search.js?1765287969></script></div><div class=highlightable><ul class=topics><li data-nav-id=/1-worklog/ title=Worklog class=dd-item><a href=../../1-worklog/><b>1. </b>Worklog
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/1-worklog/1.1-week1/ title="Week 1 Worklog" class=dd-item><a href=../../1-worklog/1.1-week1/><b>1.1. </b>Week 1 Worklog
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/1-worklog/1.2-week2/ title="Week 2 Worklog" class=dd-item><a href=../../1-worklog/1.2-week2/><b>1.2. </b>Week 2 Worklog
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/1-worklog/1.3-week3/ title="Week 3 Worklog" class=dd-item><a href=../../1-worklog/1.3-week3/><b>1.3. </b>Week 3 Worklog
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/1-worklog/1.4-week4/ title="Week 4 Worklog" class=dd-item><a href=../../1-worklog/1.4-week4/><b>1.4. </b>Week 4 Worklog
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/1-worklog/1.5-week5/ title="Week 5 Worklog" class=dd-item><a href=../../1-worklog/1.5-week5/><b>1.5. </b>Week 5 Worklog
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/1-worklog/1.6-week6/ title="Week 6 Worklog" class=dd-item><a href=../../1-worklog/1.6-week6/><b>1.6. </b>Week 6 Worklog
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/1-worklog/1.7-week7/ title="Week 7 Worklog" class=dd-item><a href=../../1-worklog/1.7-week7/><b>1.7. </b>Week 7 Worklog
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/1-worklog/1.8-week8/ title="Week 8 Worklog" class=dd-item><a href=../../1-worklog/1.8-week8/><b>1.8. </b>Week 8 Worklog
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/1-worklog/1.9-week9/ title="Week 9 Worklog" class=dd-item><a href=../../1-worklog/1.9-week9/><b>1.9. </b>Week 9 Worklog
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/1-worklog/1.10-week10/ title="Week 10 Worklog" class=dd-item><a href=../../1-worklog/1.10-week10/><b>1.10. </b>Week 10 Worklog
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/1-worklog/1.11-week11/ title="Week 11 Worklog" class=dd-item><a href=../../1-worklog/1.11-week11/><b>1.11. </b>Week 11 Worklog
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/1-worklog/1.12-week12/ title="Week 12 Worklog" class=dd-item><a href=../../1-worklog/1.12-week12/><b>1.12. </b>Week 12 Worklog
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/2-proposal/ title=Proposal class=dd-item><a href=../../2-proposal/><b>2. </b>Proposal
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/3-blogstranslated/ title="Translated Blogs" class="dd-item
parent"><a href=../../3-blogstranslated/><b>3. </b>Translated Blogs
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/3-blogstranslated/3.1-blog1/ title="Blog 1" class=dd-item><a href=../../3-blogstranslated/3.1-blog1/><b>3.1. </b>Blog 1
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/3-blogstranslated/3.2-blog2/ title="Blog 2" class="dd-item
active"><a href=../../3-blogstranslated/3.2-blog2/><b>3.2. </b>Blog 2
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/3-blogstranslated/3.3-blog3/ title="Blog 3" class=dd-item><a href=../../3-blogstranslated/3.3-blog3/><b>3.3. </b>Blog 3
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/4-eventparticipated/ title="Events Participated" class=dd-item><a href=../../4-eventparticipated/><b>4. </b>Events Participated
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/4-eventparticipated/4.1-event1/ title="Event 1" class=dd-item><a href=../../4-eventparticipated/4.1-event1/><b>4.1. </b>Event 1
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/4-eventparticipated/4.2-event2/ title="Event 2" class=dd-item><a href=../../4-eventparticipated/4.2-event2/><b>4.2. </b>Event 2
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/4-eventparticipated/4.3-event3/ title="Event 3" class=dd-item><a href=../../4-eventparticipated/4.3-event3/><b>4.3. </b>Event 3
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/5-workshop/ title=Workshop class=dd-item><a href=../../5-workshop/><b>5. </b>Workshop
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/5-workshop/5.1-workshop-overview/ title=Introduction class=dd-item><a href=../../5-workshop/5.1-workshop-overview/><b>5.1. </b>Introduction
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/5-workshop/5.2-prerequiste/ title=Prerequisite class=dd-item><a href=../../5-workshop/5.2-prerequiste/><b>5.2. </b>Prerequisite
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/5-workshop/5.3-enablebedrockmodels/ title="Enable Bedrock Models" class=dd-item><a href=../../5-workshop/5.3-enablebedrockmodels/><b>5.3. </b>Enable Bedrock Models
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/5-workshop/5.4-configureawscli/ title="Configure AWS CLI" class=dd-item><a href=../../5-workshop/5.4-configureawscli/><b>5.4. </b>Configure AWS CLI
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/5-workshop/5.5-preparedata/ title="Prepare Data" class=dd-item><a href=../../5-workshop/5.5-preparedata/><b>5.5. </b>Prepare Data
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/5-workshop/5.6-deploysolution/ title="Deploy the Solution" class=dd-item><a href=../../5-workshop/5.6-deploysolution/><b>5.6. </b>Deploy the Solution
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/5-workshop/5.7-setupmessengerbot/ title="Setup Messenger Bot" class=dd-item><a href=../../5-workshop/5.7-setupmessengerbot/><b>5.7. </b>Setup Messenger Bot
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/5-workshop/5.8-setupadmindashboard/ title="Setup Admin Dashboard" class=dd-item><a href=../../5-workshop/5.8-setupadmindashboard/><b>5.8. </b>Setup Admin Dashboard
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/5-workshop/5.9-usingchatbot/ title="Using the Chatbot" class=dd-item><a href=../../5-workshop/5.9-usingchatbot/><b>5.9. </b>Using the Chatbot
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/5-workshop/5.10-usingadmindashboard/ title="Using the Admin Dashboard" class=dd-item><a href=../../5-workshop/5.10-usingadmindashboard/><b>5.10. </b>Using the Admin Dashboard
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/5-workshop/5.11-usingconsultantportal/ title="Using the Consultant Portal" class=dd-item><a href=../../5-workshop/5.11-usingconsultantportal/><b>5.11. </b>Using the Consultant Portal
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/5-workshop/5.12-cleanup/ title="Clean Up Resources" class=dd-item><a href=../../5-workshop/5.12-cleanup/><b>5.12. </b>Clean Up Resources
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/6-self-evaluation/ title=Self-Assessment class=dd-item><a href=../../6-self-evaluation/><b>6. </b>Self-Assessment
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/7-feedback/ title="Sharing and Feedback" class=dd-item><a href=../../7-feedback/><b>7. </b>Sharing and Feedback
<i class="fas fa-check read-icon"></i></a></li></ul><section id=shortcuts><h3>More</h3><ul><li><a class=padding href=https://www.facebook.com/groups/awsstudygroupfcj/><i class='fab fa-facebook'></i> AWS Study Group</a></li></ul></section><section id=prefooter><hr><ul><li><a class=padding><i class="fas fa-language fa-fw"></i><div class=select-style><select id=select-language onchange="location=this.value"><option id=en value=https://duc140205.github.io/aws-internship-report/3-blogstranslated/3.2-blog2/ selected>English</option><option id=vi value=https://duc140205.github.io/aws-internship-report/vi/3-blogstranslated/3.2-blog2/>Tiếng Việt</option></select><svg id="Capa_1" xmlns:xlink="http://www.w3.org/1999/xlink" width="255" height="255" viewBox="0 0 255 255" style="enable-background:new 0 0 255 255"><g><g id="arrow-drop-down"><polygon points="0,63.75 127.5,191.25 255,63.75"/></g></g></svg></div></a></li><li><a class=padding href=# data-clear-history-toggle><i class="fas fa-history fa-fw"></i> Clear History</a></li></ul></section><section id=footer><left><b>Workshop</b><br><img src="https://hitwebcounter.com/counter/counter.php?page=7920860&style=0038&nbdigits=9&type=page&initCount=0" title=Migrate alt="web counter" border=0></a><br><b><a href=https://cloudjourney.awsstudygroup.com/>Cloud Journey</a></b><br><img src="https://hitwebcounter.com/counter/counter.php?page=7830807&style=0038&nbdigits=9&type=page&initCount=0" title="Total CLoud Journey" alt="web counter" border=0>
</left><left><br><br><b>Last Updated</b><br><i><span id=lastUpdated style=color:orange></span>
</i><script>const today=new Date,formattedDate=today.toLocaleDateString("en-GB");document.getElementById("lastUpdated").textContent=formattedDate</script></left><left><br><br><b>Team</b><br><i><a href=https://www.facebook.com/groups/660548818043427 style=color:orange>First Cloud Journey</a><br></i></left><script async defer src=https://buttons.github.io/buttons.js></script></section></div></nav><section id=body><div id=overlay></div><div class="padding highlightable"><div><div id=top-bar><div id=breadcrumbs itemscope itemtype=http://data-vocabulary.org/Breadcrumb><span id=sidebar-toggle-span><a href=# id=sidebar-toggle data-sidebar-toggle><i class="fas fa-bars"></i>
</a></span><span id=toc-menu><i class="fas fa-list-alt"></i></span>
<span class=links><a href=../../>Internship Report</a> > <a href=../../3-blogstranslated/>Translated Blogs</a> > Blog 2</span></div><div class=progress><div class=wrapper><nav id=TableOfContents><ul><li><a href=#understanding-savings-plans-discount-sharing>Understanding Savings Plans Discount Sharing</a></li><li><a href=#prerequisites>Prerequisites</a></li><li><a href=#using-cur-20-for-savings-plans-chargeback>Using CUR 2.0 for Savings Plans Chargeback</a></li><li><a href=#example>Example</a></li><li><a href=#conclusion>Conclusion</a></li></ul></nav></div></div></div></div><div id=head-tags></div><div id=body-inner><h1>Blog 2</h1><h1 id=aws-savings-plans-how-to-implement-an-effective-chargeback-strategy>AWS Savings Plans: How to Implement an Effective Chargeback Strategy</h1><p>by Alonso de Cosio and Ketan Kumar | on 28 FEB 2025 | in <a href=https://aws.amazon.com/blogs/aws-cloud-financial-management/category/analytics/amazon-athena/>Amazon Athena</a>, <a href=https://aws.amazon.com/blogs/aws-cloud-financial-management/category/aws-cloud-financial-management/>AWS Cloud Financial Management</a>, <a href=https://aws.amazon.com/blogs/aws-cloud-financial-management/category/aws-cloud-financial-management/aws-cost-and-usage-report/>AWS Cost and Usage Report</a>, <a href=https://aws.amazon.com/blogs/aws-cloud-financial-management/category/post-types/best-practices/>Best Practices</a>, <a href=https://aws.amazon.com/blogs/aws-cloud-financial-management/category/post-types/technical-how-to/>Technical How-to</a> | <a href=https://aws.amazon.com/blogs/aws-cloud-financial-management/aws-savings-plans-how-to-implement-an-effective-chargeback-strategy/>Permalink</a> | <a href=https://aws.amazon.com/blogs/aws-cloud-financial-management/aws-savings-plans-how-to-implement-an-effective-chargeback-strategy/>Share</a></p><p>As organizations grow, managing cloud infrastructure can become increasingly complex, requiring advanced financial strategies to ensure cost optimization. <a href=https://aws.amazon.com/savingsplans/>AWS Savings Plans</a> provide a flexible pricing model that offers significant savings on AWS services in return for a commitment to a consistent amount of usage, measured in USD per hour, over a one or three year term. In many cases, multiple Savings Plans are adopted, either by individual teams committing directly or by FinOps teams prioritizing specific accounts. While these strategies can lead to substantial savings, they also add complexity when ensuring a fair and effective chargeback process.</p><p>In this article, we will show you how to define a chargeback mechanism that allocates Savings Plans purchased in the management account, linked accounts or both to recipient accounts of Savings Plan discounts. You can identify accounts that received Savings Plans discounts and the appropriate amount to chargeback to them based on their specific usage.</p><h2 id=understanding-savings-plans-discount-sharing>Understanding Savings Plans Discount Sharing</h2><p>AWS allows customers to <a href=https://docs.aws.amazon.com/awsaccountbilling/latest/aboutv2/ri-turn-off.html>share Savings Plan discounts across accounts</a> within the same <a href=https://aws.amazon.com/organizations/>AWS Organization</a>. TSavings plan hourly commitment fees are charged to the account that made the purchase, however, when sharing is enabled, the discounts may apply to multiple accounts within the organization. Savings Plan discounts are first applied to all eligible usage in the account the Savings Plan is purchased. If there is excess commitment for which there is no eligible on-demand usage, then the unused commitment is utilized by other linked accounts within the AWS Organizaiton.</p><p>While <a href=https://docs.aws.amazon.com/savingsplans/latest/userguide/sp-applying.html#calc-bills-sp>sharing maximizes savings</a>, it may require additional efforts to properly allocate the shared benefit across the organization. Accounts that benefit from Savings Plan discounts are not responsible to pay a Savings Plan commitment fee. As a result, the account incurring the cost of the commitment may not be the sole beneficiary of the savings. This shared benefit requires careful cost allocation to ensure that accounts are charged fairly based on their actual usage of the Savings Plan.</p><p>Now that we understand how Savings Plans operate and how sharing affects them, let’s explore a chargeback strategy for using data from the <a href=https://docs.aws.amazon.com/cur/latest/userguide/table-dictionary-cur2.html>Cost and Usage Report (CUR) 2.0</a>.</p><h2 id=prerequisites>Prerequisites</h2><p>Create an <a href=https://aws.amazon.com/aws-cost-management/aws-data-exports/>AWS Data Export</a> with CUR 2.0 and configure <a href=https://aws.amazon.com/glue/>AWS Glue</a> to catalogue the data. This allows you to use <a href=https://aws.amazon.com/athena/>Amazon Athena</a> to run queries and analyze CUR 2.0 data. In order to accomplish this, you need to do the following:</p><p><strong>1. Configure CUR 2.0 with AWS Data Export:</strong></p><ol><li>Sign in to the <a href=https://aws.amazon.com/console/>AWS Management console</a></li><li>Navigate to AWS Billing and Cost Management. Select Data Export and click Create to begin setting up your export.</li></ol><p><img alt="Figure 1 - Create Data Exports" src=../../images/3-BlogsTranslated/3.2-Blog2/1.png></p><p style=text-align:center;font-size:.9em;color:gray><em>Figure 1 - Create Data Exports</em></p>3. Select <b>Standard data export</b>, provide your export a name and for select <b>CUR 2.0</b> as the data table type.<p><img alt="Figure 2 - Configure export" src=../../images/3-BlogsTranslated/3.2-Blog2/2.png></p><p style=text-align:center;font-size:.9em;color:gray><em>Figure 2 - Configure export</em></p><ol start=4><li>Enabling <b>Include resource IDs</b> and <b>Split cost allocation data</b> are optional</li><li>Select Time granularity as <b>Hourly</b></li><li>Set <b>Parquet</b> as the compression format, and select <b>Overwrite existing data export file</b> for file versioning.</li></ol><p><img alt="Figure 3 - Configure export delivery options" src=../../images/3-BlogsTranslated/3.2-Blog2/3.png></p><p style=text-align:center;font-size:.9em;color:gray><em>Figure 3 - Configure export delivery options</em></p><ol start=7><li>Specify the destination Amazon S3 bucket and a path prefix where CUR 2.0 data should be stored.</li><li>Complete the setup by selecting <b>Create</b>.</li></ol><p><strong>2. Configure AWS Glue to Query CUR Data</strong></p><ol><li>Navigate to <b>AWS Glue</b> console and select <b>Data Catalog > Crawlers</b> to initiate the process of cataloging the CUR 2.0 data.</li><li>Click on <b>Create Crawler</b> and assign a unique crawler name.</li></ol><p><img alt="Figure 4 - Create AWS Glue Crawler" src=../../images/3-BlogsTranslated/3.2-Blog2/4.png></p><p style=text-align:center;font-size:.9em;color:gray><em>Figure 4 - Create AWS Glue Crawler</em></p><ol start=3><li>For the question <b>Is your data already mapped to Glue tables?</b> select Not yet</li><li>Click Add a data source, select S3, and specify the Amazon S3 location from step 1, where your CUR 2.0 data is exported, using the format: <code>s3://&lt;bucket-name>/&lt;prefix>/&lt;export-name>/data/</code></li></ol><p><img alt="Figure 5 - Create S3 data source for CUR crawler" src=../../images/3-BlogsTranslated/3.2-Blog2/5.png></p><p style=text-align:center;font-size:.9em;color:gray><em>Figure 5 - Create S3 data source for CUR crawler</em></p><ol start=5><li>Click <b>Add an S3 data source</b> and then click <b>Next</b></li><li>Click <b>Create new IAM role</b> which will create the new AWS Glue role on your behalf. This role allows Glue to access the S3 bucket where CUR2.0 files are stored.</li><li>Create a target database by clicking <b>Add database</b>. Provide a database name and click <b>Create database</b></li><li>Navigate back to the AWS Glue console and select the database created in the previous step. Set the crawler schedule to <b>On demand</b> to run only when required.</li><li>Confirm your settings and select <b>Create Crawler</b>.</li><li>Once the crawler is ready, select it and click <b>Run</b>. This will process and catalog the data, creating tables accessible by Amazon Athena.</li></ol><h2 id=using-cur-20-for-savings-plans-chargeback>Using CUR 2.0 for Savings Plans Chargeback</h2><p>Once the above per-requisites are configured, use the following query to identify the linked accounts that received Savings Plan discounts. The <strong>Effective Cost</strong> olumn provides the cost corresponding to the amount of the Savings Plan commitment that was used by linked accounts. This would be the amount that you would use to chargeback individual linked accounts.</p><ol><li>Navigate to <b>Amazon Athena</b> console to run a query. Review <a href=https://docs.aws.amazon.com/cur/latest/userguide/cur-ate-run.html>details</a> on running SQL queries in Athena.</li><li>Copy the query below into your Query editor. Ensure to update the <b>Table Name</b> in the query.</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>select</span>
</span></span><span style=display:flex><span>    DATE_FORMAT(bill_billing_period_start_date, <span style=color:#e6db74>&#39;%Y-%m-%d&#39;</span>) <span style=color:#66d9ef>as</span> <span style=color:#e6db74>&#34;Date&#34;</span>,
</span></span><span style=display:flex><span>    line_item_usage_account_id <span style=color:#66d9ef>as</span> <span style=color:#e6db74>&#34;Account Id&#34;</span>,
</span></span><span style=display:flex><span>    savings_plan_offering_type <span style=color:#66d9ef>as</span> <span style=color:#e6db74>&#34;Savings Plan Type&#34;</span>,
</span></span><span style=display:flex><span>    split_part(savings_plan_savings_plan_a_r_n, <span style=color:#e6db74>&#39;/&#39;</span>, <span style=color:#ae81ff>2</span>) <span style=color:#66d9ef>AS</span> <span style=color:#e6db74>&#34;Saving Plan ID&#34;</span>,
</span></span><span style=display:flex><span>    savings_plan_payment_option <span style=color:#66d9ef>as</span> <span style=color:#e6db74>&#34;Savings Plan Payment Option&#34;</span>,
</span></span><span style=display:flex><span>    line_item_line_item_type <span style=color:#66d9ef>as</span> <span style=color:#e6db74>&#34;Item Type&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>sum</span>(
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>case</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>when</span> line_item_line_item_type <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;SavingsPlanCoveredUsage&#39;</span> <span style=color:#66d9ef>then</span> <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>else</span> savings_plan_recurring_commitment_for_billing_period
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>    ) <span style=color:#f92672>+</span> <span style=color:#66d9ef>sum</span>(
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>case</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>when</span> line_item_line_item_type <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;SavingsPlanCoveredUsage&#39;</span> <span style=color:#66d9ef>then</span> <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>else</span> savings_plan_amortized_upfront_commitment_for_billing_period
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>    ) <span style=color:#66d9ef>as</span> <span style=color:#e6db74>&#34;Savings Plan Fee&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>sum</span>(
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>case</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>when</span> line_item_line_item_type <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;SavingsPlanCoveredUsage&#39;</span> <span style=color:#66d9ef>then</span> <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>else</span> savings_plan_recurring_commitment_for_billing_period
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>    ) <span style=color:#f92672>+</span> <span style=color:#66d9ef>sum</span>(
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>case</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>when</span> line_item_line_item_type <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;SavingsPlanCoveredUsage&#39;</span> <span style=color:#66d9ef>then</span> <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>else</span> savings_plan_amortized_upfront_commitment_for_billing_period
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>    ) <span style=color:#f92672>-</span> <span style=color:#66d9ef>sum</span>(savings_plan_used_commitment) <span style=color:#66d9ef>as</span> <span style=color:#e6db74>&#34;Unused commitment&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>sum</span>(
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>case</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>when</span> line_item_line_item_type <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;SavingsPlanRecurringFee&#39;</span> <span style=color:#66d9ef>then</span> <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>else</span> savings_plan_savings_plan_effective_cost
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>    ) <span style=color:#66d9ef>as</span> <span style=color:#e6db74>&#34;Effective Cost&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>sum</span>(
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>case</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>when</span> line_item_line_item_type <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;SavingsPlanRecurringFee&#39;</span> <span style=color:#66d9ef>then</span> <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>else</span> line_item_unblended_cost
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>    ) <span style=color:#f92672>-</span> <span style=color:#66d9ef>sum</span>(
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>case</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>when</span> line_item_line_item_type <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;SavingsPlanRecurringFee&#39;</span> <span style=color:#66d9ef>then</span> <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>else</span> savings_plan_savings_plan_effective_cost
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>    ) <span style=color:#f92672>-</span> (
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>sum</span>(
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>case</span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>when</span> line_item_line_item_type <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;SavingsPlanCoveredUsage&#39;</span> <span style=color:#66d9ef>then</span> <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>else</span> savings_plan_recurring_commitment_for_billing_period
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>        ) <span style=color:#f92672>+</span> <span style=color:#66d9ef>sum</span>(
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>case</span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>when</span> line_item_line_item_type <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;SavingsPlanCoveredUsage&#39;</span> <span style=color:#66d9ef>then</span> <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>else</span> savings_plan_amortized_upfront_commitment_for_billing_period
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>        ) <span style=color:#f92672>-</span> <span style=color:#66d9ef>sum</span>(savings_plan_used_commitment)
</span></span><span style=display:flex><span>    ) <span style=color:#66d9ef>as</span> <span style=color:#e6db74>&#34;Savings&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>from</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;</span><span style=color:#66d9ef>Table</span> Name<span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>where</span>
</span></span><span style=display:flex><span>    line_item_line_item_type <span style=color:#66d9ef>in</span> (<span style=color:#e6db74>&#39;SavingsPlanCoveredUsage&#39;</span>, <span style=color:#e6db74>&#39;SavingsPlanRecurringFee&#39;</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>and</span> bill_billing_period_start_date <span style=color:#f92672>=</span> DATE_TRUNC(<span style=color:#e6db74>&#39;month&#39;</span>, <span style=color:#66d9ef>CURRENT_DATE</span>) <span style=color:#f92672>-</span> INTERVAL <span style=color:#e6db74>&#39;1&#39;</span> <span style=color:#66d9ef>month</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>group</span> <span style=color:#66d9ef>by</span>
</span></span><span style=display:flex><span>    bill_billing_period_start_date,
</span></span><span style=display:flex><span>    line_item_usage_account_id,
</span></span><span style=display:flex><span>    savings_plan_offering_type,
</span></span><span style=display:flex><span>    savings_plan_savings_plan_a_r_n,
</span></span><span style=display:flex><span>    savings_plan_payment_option,
</span></span><span style=display:flex><span>    line_item_line_item_type
</span></span><span style=display:flex><span><span style=color:#66d9ef>order</span> <span style=color:#66d9ef>by</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>sum</span>(savings_plan_savings_plan_effective_cost) <span style=color:#66d9ef>desc</span>;
</span></span></code></pre></div><p>To understand this better, let’s break down two critical components found in the AWS CUR 2.0:</p><ul><li><p><strong>SavingsPlanRecurringFee</strong>: This is the field in the output where <span style=color:red>Item Type = &lsquo;SavingsPlanRecurringFee&rsquo;</span>. It represents the cost that the purchasing account is obligated to pay for the Savings Plan commitment. This is a fixed cost, regardless of whether the full commitment was utilized. Depending on the Savings Plan type, this amount may be reflected as either unblended or amortized amount.</p></li><li><p><strong>SavingsPlanCoveredUsage</strong>: This is the field in the output where <span style=color:red>Item Type = &lsquo;SavingsPlanCoveredUsage&rsquo;</span>. It represents the actual usage of the Savings Plan, showing how much of the committed Savings Plan has been applied to usage across the organization. This usage can be spread across multiple accounts, depending on the organization’s structure and workload distribution.</p></li></ul><p>To perform Savings Plan chargebacks, it is crucial to use the <strong>Effective Cost</strong> column associated to each linked account. This column provides the cost that corresponds to the portion of the Savings Plan commitment that was used by each linked account. The goal is to ensure that each linked account receives a Savings Plan fee according to the benefits it received from the Savings Plan.</p><p>It is also important to validate the <strong>Unused Commitment</strong> column for rows with <span style=color:red>SavingsPlanRecurringFee</span>. If the value in this column is greater than $0, it indicates that the Savings Plan is not fully utilized. While this under-utilization may indicate potential savings loss, it is important to validate. Organizations may deliberately purchase Savings Plan commitments that slightly exceed expected usage, as the overall savings from the discount can still outweigh the cost of the unused portion, providing a net savings benefit for the organization.</p><h2 id=example>Example</h2><p>In the table below, the Savings Plan Type is <span style=color:red>No Upfront</span>. The monthly recurring fee is charged to Account ID A as we see the associated ‘SavingsPlanRecurringFee’ field. Eligible usage in Account ID A gets the discount first as it is the account where the Savings Plan is purchased. Out of the $12,410.68 monthly commitment, $8,363.12 is the effective cost to be charged back to Account ID A. Account B used $1,361.26 out of the total recurring commitment, which would be Account B’s chargeback value. We can also observe that unused commitment is $0 and sum of effective cost matches with the recurring fee, which signifies that the Savings Plan is fully utilized.</p><p><img alt="Figure 6 - Example report to show distribution of savings plans benefits among accounts" src=../../images/3-BlogsTranslated/3.2-Blog2/6.jpg></p><p style=text-align:center;font-size:.9em;color:gray><em>Figure 6 - Example report to show distribution of savings plans benefits among accounts</em></p><p>Let’s see another example:</p><p>In the table below, we observe the Savings Plan Type is <span style=color:red>All Upfront</span>, which corresponds to the amortized portion of the upfront payment for the billing period. The data shows that the Savings Plan was purchased in Account ID A and was fully utilized by Account ID A, as the ‘Unused Commitment’ is $0. In this case since there is only one account that is getting the benefit of the Savings Plan and the recurring fee matches with the effective cost.</p><p><img alt="Figure 7 - Example report showing consumption of savings plan benefits by purchasing account" src=../../images/3-BlogsTranslated/3.2-Blog2/7.jpg></p><p style=text-align:center;font-size:.9em;color:gray><em>Figure 7 - Example report showing consumption of savings plan benefits by purchasing account</em></p><h2 id=conclusion>Conclusion</h2><p>In this article, we discussed the impact Savings Plan sharing has on it’s usage. When sharing is enabled, there can be accounts that receive the benefit of Savings Plan discounts without having to pay a Savings Plan fee. The account that makes the purchase is solely obligated to pay the Savings Plan fee.</p><p>We used a targeted query in AWS Cost and Usage report 2.0 to design a chargeback mechanism that allows us to identify all the beneficiaries of Savings Plan discounts and proportion of the recurring fee they can be charged. Using this strategy, you can now use internal company specific chargeback mechanisms to chargeback accounts accurately based on the usage and therefore the savings they received, rather than just charging the account that holds the Savings Plan. This method allows for a fair and transparent distribution of both the costs and the benefits of the Savings Plans, helping to align financial responsibility with actual usage.</p><p>This strategy fosters transparency, accountability, and encourages thoughtful cloud usage across teams. By ensuring that all accounts are charged according to the Savings Plan benefits they receive, you promote a cost-conscious culture within your organization.</p><p>TAGS: <a href=https://aws.amazon.com/blogs/aws-cloud-financial-management/tag/chargeback/>Chargeback</a>, <a href=https://aws.amazon.com/blogs/aws-cloud-financial-management/tag/cost-allocation/>Cost Allocation</a>, <a href=https://aws.amazon.com/blogs/aws-cloud-financial-management/tag/savings-plans/>Savings Plans</a>, <a href=https://aws.amazon.com/blogs/aws-cloud-financial-management/tag/showback/>Showback</a></p><table><tr><td style=vertical-align:top;width:110px;text-align:center><img src=../../images/3-BlogsTranslated/3.2-Blog2/alonso.jpg alt="Alonso de Cosio" style="width:100px;border-radius:8px;display:block;margin:0 auto 8px"><div style=font-weight:700;margin-top:4px>Alonso de Cosio</div></td><td style=vertical-align:top;padding-left:20px>Alonso de Cosio is a <b>Principal Technical Account Manager</b> at <b>AWS</b>. In his role, he provides advocacy and strategic technical guidance to help customers plan and build solutions using AWS best practices. He is passionate about building modular and scalable enterprise systems on AWS using <b>serverless</b> technologies. Beyond work, Alonso enjoys spending time with his wife and dog, as well as going to the beach and traveling.</td></tr></table><table><tr><td style=vertical-align:top;width:110px;text-align:center><img src=../../images/3-BlogsTranslated/3.2-Blog2/ketan.jpg alt="Ketan Kumar" style="width:100px;border-radius:8px;display:block;margin:0 auto 8px"><div style=font-weight:700;margin-top:4px>Ketan Kumar</div></td><td style=vertical-align:top;padding-left:20px>Ketan is a <b>Senior Technical Account Manager</b> at <b>AWS</b>, based out of <b>Dublin, Ireland</b>. In his role, he provides strategic technical guidance to help customers use AWS best practices to plan and build solutions. He is dedicated to empowering customers to develop scalable, resilient, and cost-effective architectures.<br>In his free time, Ketan enjoys spending time with his wife and family, traveling, playing video games, and watching movies.</td></tr></table><footer class=footline></footer></div></div><div id=navigation><a class="nav nav-prev" href=../../3-blogstranslated/3.1-blog1/ title="Blog 1"><i class="fa fa-chevron-left"></i></a>
<a class="nav nav-next" href=../../3-blogstranslated/3.3-blog3/ title="Blog 3" style=margin-right:0><i class="fa fa-chevron-right"></i></a></div></section><div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px><div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div></div><script src=../../js/clipboard.min.js?1765287969></script><script src=../../js/perfect-scrollbar.min.js?1765287969></script><script src=../../js/perfect-scrollbar.jquery.min.js?1765287969></script><script src=../../js/jquery.sticky.js?1765287969></script><script src=../../js/featherlight.min.js?1765287969></script><script src=../../js/highlight.pack.js?1765287969></script><script>hljs.initHighlightingOnLoad()</script><script src=../../js/modernizr.custom-3.6.0.js?1765287969></script><script src=../../js/learn.js?1765287969></script><script src=../../js/hugo-learn.js?1765287969></script><link href=../../mermaid/mermaid.css?1765287969 rel=stylesheet><script src=../../mermaid/mermaid.js?1765287969></script><script>mermaid.initialize({startOnLoad:!0})</script><script>(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,(e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date),(i=t.createElement(n),a=t.getElementsByTagName(n)[0]),i.async=1,i.src=s,a.parentNode.insertBefore(i,a)})(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-158079754-2","auto"),ga("send","pageview")</script></body></html>